<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>XML API - 操作工作流的业务对象</title>
<link href="../_res/css/base.css" type="text/css" rel="stylesheet" />

<script type="text/javascript" src="../_res/js/jquery-1.4.2.min.js"></script>
<script type="text/javascript" src="../_res/js/help.js"></script>
</head>

<body>
<div id="bodyContent">
<div id="mainContent">


<p>现有的工作流XML结构如下</p>

<pre class="code">
<span style="color:blue;background:white">&lt;?</span><span style="color:#a31515;background:white">xml </span><span style="color:red;background:white">version</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">1.0</span><span style="color:black;background:white">" </span><span style="color:red;background:white">encoding</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">gb2312</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">?&gt;
&lt;</span><span style="color:#a31515;background:white">BusinessType </span><span style="color:red;background:white">businessAssembly</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">Mysoft.Cbgl.Business</span><span style="color:black;background:white">" </span><span style="color:red;background:white">businessClassName</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">CbContractBalanceSP_HTML</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">&gt;
    &lt;</span><span style="color:#a31515;background:white">Item</span><span style="color:blue;background:white">&gt;
        &lt;</span><span style="color:#a31515;background:white">Domain </span><span style="color:red;background:white">name</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">公司GUID</span><span style="color:black;background:white">" </span><span style="color:red;background:white">isupdate</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">0</span><span style="color:black;background:white">" </span><span style="color:red;background:white">isnull</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">1</span><span style="color:black;background:white">" </span><span style="color:red;background:white">type</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">varchar</span><span style="color:black;background:white">" </span><span style="color:red;background:white">len</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">100</span><span style="color:black;background:white">"  </span><span style="color:red;background:white">displaytype</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">text</span><span style="color:black;background:white">" </span><span style="color:red;background:white">dropdownoptions</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"" </span><span style="color:red;background:white">default</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">""</span><span style="color:blue;background:white">/&gt;
        &lt;</span><span style="color:#a31515;background:white">Domain </span><span style="color:red;background:white">name</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">项目GUID</span><span style="color:black;background:white">" </span><span style="color:red;background:white">isupdate</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">0</span><span style="color:black;background:white">" </span><span style="color:red;background:white">isnull</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">1</span><span style="color:black;background:white">" </span><span style="color:red;background:white">type</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">varchar</span><span style="color:black;background:white">" </span><span style="color:red;background:white">len</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">999999</span><span style="color:black;background:white">"  </span><span style="color:red;background:white">displaytype</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">text</span><span style="color:black;background:white">" </span><span style="color:red;background:white">dropdownoptions</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"" </span><span style="color:red;background:white">default</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">""</span><span style="color:blue;background:white">/&gt;
        &lt;</span><span style="color:#a31515;background:white">Domain </span><span style="color:red;background:white">name</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">合同编号</span><span style="color:black;background:white">" </span><span style="color:red;background:white">isupdate</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">0</span><span style="color:black;background:white">" </span><span style="color:red;background:white">isnull</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">0</span><span style="color:black;background:white">" </span><span style="color:red;background:white">type</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">varchar</span><span style="color:black;background:white">" </span><span style="color:red;background:white">len</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">200</span><span style="color:black;background:white">" </span><span style="color:red;background:white">displaytype</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">text</span><span style="color:black;background:white">" </span><span style="color:red;background:white">dropdownoptions</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"" </span><span style="color:red;background:white">default</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">""</span><span style="color:blue;background:white">/&gt;
        &lt;</span><span style="color:#a31515;background:white">Domain </span><span style="color:red;background:white">name</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">合同名称</span><span style="color:black;background:white">" </span><span style="color:red;background:white">isupdate</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">0</span><span style="color:black;background:white">" </span><span style="color:red;background:white">isnull</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">0</span><span style="color:black;background:white">" </span><span style="color:red;background:white">type</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">varchar</span><span style="color:black;background:white">" </span><span style="color:red;background:white">len</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">80</span><span style="color:black;background:white">" </span><span style="color:red;background:white">displaytype</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">text</span><span style="color:black;background:white">" </span><span style="color:red;background:white">dropdownoptions</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"" </span><span style="color:red;background:white">default</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">""</span><span style="color:blue;background:white">/&gt;
        &lt;</span><span style="color:#a31515;background:white">Domain </span><span style="color:red;background:white">name</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">结算书编号</span><span style="color:black;background:white">" </span><span style="color:red;background:white">isupdate</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">0</span><span style="color:black;background:white">" </span><span style="color:red;background:white">isnull</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">0</span><span style="color:black;background:white">" </span><span style="color:red;background:white">type</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">varchar</span><span style="color:black;background:white">" </span><span style="color:red;background:white">len</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">100</span><span style="color:black;background:white">" </span><span style="color:red;background:white">displaytype</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">text</span><span style="color:black;background:white">" </span><span style="color:red;background:white">dropdownoptions</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"" </span><span style="color:red;background:white">default</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">""</span><span style="color:blue;background:white">/&gt;
        &lt;</span><span style="color:#a31515;background:white">Domain </span><span style="color:red;background:white">name</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">乙方单位</span><span style="color:black;background:white">" </span><span style="color:red;background:white">isupdate</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">0</span><span style="color:black;background:white">" </span><span style="color:red;background:white">isnull</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">0</span><span style="color:black;background:white">" </span><span style="color:red;background:white">type</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">varchar</span><span style="color:black;background:white">" </span><span style="color:red;background:white">len</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">100</span><span style="color:black;background:white">" </span><span style="color:red;background:white">displaytype</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">text</span><span style="color:black;background:white">" </span><span style="color:red;background:white">dropdownoptions</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"" </span><span style="color:red;background:white">default</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">""</span><span style="color:blue;background:white">/&gt;
        &lt;</span><span style="color:#a31515;background:white">Domain </span><span style="color:red;background:white">name</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">所属项目</span><span style="color:black;background:white">" </span><span style="color:red;background:white">isupdate</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">0</span><span style="color:black;background:white">" </span><span style="color:red;background:white">isnull</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">0</span><span style="color:black;background:white">" </span><span style="color:red;background:white">type</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">varchar</span><span style="color:black;background:white">" </span><span style="color:red;background:white">len</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">400</span><span style="color:black;background:white">" </span><span style="color:red;background:white">displaytype</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">text</span><span style="color:black;background:white">" </span><span style="color:red;background:white">dropdownoptions</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"" </span><span style="color:red;background:white">default</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">""</span><span style="color:blue;background:white">/&gt;
        &lt;</span><span style="color:#a31515;background:white">Domain </span><span style="color:red;background:white">name</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">经办人</span><span style="color:black;background:white">" </span><span style="color:red;background:white">isupdate</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">0</span><span style="color:black;background:white">" </span><span style="color:red;background:white">isnull</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">0</span><span style="color:black;background:white">" </span><span style="color:red;background:white">type</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">varchar</span><span style="color:black;background:white">" </span><span style="color:red;background:white">len</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">20</span><span style="color:black;background:white">" </span><span style="color:red;background:white">displaytype</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">text</span><span style="color:black;background:white">" </span><span style="color:red;background:white">dropdownoptions</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"" </span><span style="color:red;background:white">default</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">""</span><span style="color:blue;background:white">/&gt;
        &lt;</span><span style="color:#a31515;background:white">Domain </span><span style="color:red;background:white">name</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">经办部门</span><span style="color:black;background:white">" </span><span style="color:red;background:white">isupdate</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">0</span><span style="color:black;background:white">" </span><span style="color:red;background:white">isnull</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">0</span><span style="color:black;background:white">" </span><span style="color:red;background:white">type</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">varchar</span><span style="color:black;background:white">" </span><span style="color:red;background:white">len</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">100</span><span style="color:black;background:white">" </span><span style="color:red;background:white">displaytype</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">text</span><span style="color:black;background:white">" </span><span style="color:red;background:white">dropdownoptions</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"" </span><span style="color:red;background:white">default</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">""</span><span style="color:blue;background:white">/&gt;
        &lt;</span><span style="color:#a31515;background:white">Domain </span><span style="color:red;background:white">name</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">结算总造价</span><span style="color:black;background:white">" </span><span style="color:red;background:white">isupdate</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">0</span><span style="color:black;background:white">" </span><span style="color:red;background:white">isnull</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">0</span><span style="color:black;background:white">" </span><span style="color:red;background:white">type</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">money</span><span style="color:black;background:white">" </span><span style="color:red;background:white">len</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">8</span><span style="color:black;background:white">" </span><span style="color:red;background:white">displaytype</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">number</span><span style="color:black;background:white">" </span><span style="color:red;background:white">dropdownoptions</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"" </span><span style="color:red;background:white">default</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">""</span><span style="color:blue;background:white">/&gt;
        &lt;</span><span style="color:#a31515;background:white">Domain </span><span style="color:red;background:white">name</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">合约规划使用明细列表比较域</span><span style="color:black;background:white">" </span><span style="color:red;background:white">isupdate</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">0</span><span style="color:black;background:white">" </span><span style="color:red;background:white">isnull</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">0</span><span style="color:black;background:white">" </span><span style="color:red;background:white">type</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">money</span><span style="color:black;background:white">" </span><span style="color:red;background:white">len</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">8</span><span style="color:black;background:white">" </span><span style="color:red;background:white">displaytype</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">number</span><span style="color:black;background:white">" </span><span style="color:red;background:white">dropdownoptions</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"" </span><span style="color:red;background:white">default</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">""</span><span style="color:blue;background:white">/&gt;
        
        &lt;!-- </span><span style="color:green;background:white">这里去掉一大批 Domain 节点 </span><span style="color:blue;background:white">--&gt;
        
        &lt;</span><span style="color:#a31515;background:white">Group </span><span style="color:red;background:white">name</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">合约规划使用明细列表</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">&gt;
            &lt;</span><span style="color:#a31515;background:white">Item</span><span style="color:blue;background:white">&gt;
                &lt;</span><span style="color:#a31515;background:white">Domain </span><span style="color:red;background:white">name</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">序号</span><span style="color:black;background:white">" </span><span style="color:red;background:white">isupdate</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">0</span><span style="color:black;background:white">" </span><span style="color:red;background:white">isnull</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">0</span><span style="color:black;background:white">" </span><span style="color:red;background:white">type</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">varchar</span><span style="color:black;background:white">" </span><span style="color:red;background:white">len</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">100</span><span style="color:black;background:white">"  </span><span style="color:red;background:white">displaytype</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">text</span><span style="color:black;background:white">" </span><span style="color:red;background:white">dropdownoptions</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"" </span><span style="color:red;background:white">default</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">""</span><span style="color:blue;background:white">/&gt;
                &lt;</span><span style="color:#a31515;background:white">Domain </span><span style="color:red;background:white">name</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">合约规划名称</span><span style="color:black;background:white">" </span><span style="color:red;background:white">isupdate</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">0</span><span style="color:black;background:white">" </span><span style="color:red;background:white">isnull</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">0</span><span style="color:black;background:white">" </span><span style="color:red;background:white">type</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">varchar</span><span style="color:black;background:white">" </span><span style="color:red;background:white">len</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">100</span><span style="color:black;background:white">"  </span><span style="color:red;background:white">displaytype</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">text</span><span style="color:black;background:white">" </span><span style="color:red;background:white">dropdownoptions</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"" </span><span style="color:red;background:white">default</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">""</span><span style="color:blue;background:white">/&gt;
                &lt;</span><span style="color:#a31515;background:white">Domain </span><span style="color:red;background:white">name</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">科目名称</span><span style="color:black;background:white">" </span><span style="color:red;background:white">isupdate</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">0</span><span style="color:black;background:white">" </span><span style="color:red;background:white">isnull</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">0</span><span style="color:black;background:white">" </span><span style="color:red;background:white">type</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">varchar</span><span style="color:black;background:white">" </span><span style="color:red;background:white">len</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">40</span><span style="color:black;background:white">"  </span><span style="color:red;background:white">displaytype</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">text</span><span style="color:black;background:white">" </span><span style="color:red;background:white">dropdownoptions</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"" </span><span style="color:red;background:white">default</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">""</span><span style="color:blue;background:white">/&gt;
                &lt;</span><span style="color:#a31515;background:white">Domain </span><span style="color:red;background:white">name</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">项目名称</span><span style="color:black;background:white">" </span><span style="color:red;background:white">isupdate</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">0</span><span style="color:black;background:white">" </span><span style="color:red;background:white">isnull</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">0</span><span style="color:black;background:white">" </span><span style="color:red;background:white">type</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">varchar</span><span style="color:black;background:white">" </span><span style="color:red;background:white">len</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">400</span><span style="color:black;background:white">"  </span><span style="color:red;background:white">displaytype</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">text</span><span style="color:black;background:white">" </span><span style="color:red;background:white">dropdownoptions</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"" </span><span style="color:red;background:white">default</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">""</span><span style="color:blue;background:white">/&gt;
                &lt;</span><span style="color:#a31515;background:white">Domain </span><span style="color:red;background:white">name</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">合约规划金额</span><span style="color:black;background:white">" </span><span style="color:red;background:white">isupdate</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">0</span><span style="color:black;background:white">" </span><span style="color:red;background:white">isnull</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">0</span><span style="color:black;background:white">" </span><span style="color:red;background:white">type</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">money</span><span style="color:black;background:white">" </span><span style="color:red;background:white">len</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">8</span><span style="color:black;background:white">"  </span><span style="color:red;background:white">displaytype</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">number</span><span style="color:black;background:white">" </span><span style="color:red;background:white">dropdownoptions</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"" </span><span style="color:red;background:white">default</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">""</span><span style="color:blue;background:white">/&gt;
                &lt;</span><span style="color:#a31515;background:white">Domain </span><span style="color:red;background:white">name</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">合同对应金额</span><span style="color:black;background:white">" </span><span style="color:red;background:white">isupdate</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">0</span><span style="color:black;background:white">" </span><span style="color:red;background:white">isnull</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">0</span><span style="color:black;background:white">" </span><span style="color:red;background:white">type</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">money</span><span style="color:black;background:white">" </span><span style="color:red;background:white">len</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">8</span><span style="color:black;background:white">"  </span><span style="color:red;background:white">displaytype</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">number</span><span style="color:black;background:white">" </span><span style="color:red;background:white">dropdownoptions</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"" </span><span style="color:red;background:white">default</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">""</span><span style="color:blue;background:white">/&gt;
                &lt;</span><span style="color:#a31515;background:white">Domain </span><span style="color:red;background:white">name</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">本次变更对应金额</span><span style="color:black;background:white">" </span><span style="color:red;background:white">isupdate</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">0</span><span style="color:black;background:white">" </span><span style="color:red;background:white">isnull</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">0</span><span style="color:black;background:white">" </span><span style="color:red;background:white">type</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">money</span><span style="color:black;background:white">" </span><span style="color:red;background:white">len</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">8</span><span style="color:black;background:white">"  </span><span style="color:red;background:white">displaytype</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">number</span><span style="color:black;background:white">" </span><span style="color:red;background:white">dropdownoptions</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"" </span><span style="color:red;background:white">default</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">""</span><span style="color:blue;background:white">/&gt;
                &lt;</span><span style="color:#a31515;background:white">Domain </span><span style="color:red;background:white">name</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">预估变更余额</span><span style="color:black;background:white">" </span><span style="color:red;background:white">isupdate</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">0</span><span style="color:black;background:white">" </span><span style="color:red;background:white">isnull</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">1</span><span style="color:black;background:white">" </span><span style="color:red;background:white">type</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">money</span><span style="color:black;background:white">" </span><span style="color:red;background:white">len</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">12</span><span style="color:black;background:white">"  </span><span style="color:red;background:white">displaytype</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">number</span><span style="color:black;background:white">" </span><span style="color:red;background:white">dropdownoptions</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"" </span><span style="color:red;background:white">default</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">""</span><span style="color:blue;background:white">/&gt;
            &lt;/</span><span style="color:#a31515;background:white">Item</span><span style="color:blue;background:white">&gt;
        &lt;/</span><span style="color:#a31515;background:white">Group</span><span style="color:blue;background:white">&gt;
        &lt;</span><span style="color:#a31515;background:white">Group </span><span style="color:red;background:white">name</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">部门费用列表</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">&gt;
            &lt;</span><span style="color:#a31515;background:white">Item</span><span style="color:blue;background:white">&gt;
                &lt;</span><span style="color:#a31515;background:white">Domain </span><span style="color:red;background:white">name</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">责任人</span><span style="color:black;background:white">" </span><span style="color:red;background:white">isupdate</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">0</span><span style="color:black;background:white">" </span><span style="color:red;background:white">isnull</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">0</span><span style="color:black;background:white">" </span><span style="color:red;background:white">type</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">varchar</span><span style="color:black;background:white">" </span><span style="color:red;background:white">len</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">100</span><span style="color:black;background:white">"  </span><span style="color:red;background:white">displaytype</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">text</span><span style="color:black;background:white">" </span><span style="color:red;background:white">dropdownoptions</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"" </span><span style="color:red;background:white">default</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">""</span><span style="color:blue;background:white">/&gt;
                &lt;</span><span style="color:#a31515;background:white">Domain </span><span style="color:red;background:white">name</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">责任部门</span><span style="color:black;background:white">" </span><span style="color:red;background:white">isupdate</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">0</span><span style="color:black;background:white">" </span><span style="color:red;background:white">isnull</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">0</span><span style="color:black;background:white">" </span><span style="color:red;background:white">type</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">varchar</span><span style="color:black;background:white">" </span><span style="color:red;background:white">len</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">100</span><span style="color:black;background:white">"  </span><span style="color:red;background:white">displaytype</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">text</span><span style="color:black;background:white">" </span><span style="color:red;background:white">dropdownoptions</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"" </span><span style="color:red;background:white">default</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">""</span><span style="color:blue;background:white">/&gt;
                &lt;</span><span style="color:#a31515;background:white">Domain </span><span style="color:red;background:white">name</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">费用科目</span><span style="color:black;background:white">" </span><span style="color:red;background:white">isupdate</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">0</span><span style="color:black;background:white">" </span><span style="color:red;background:white">isnull</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">0</span><span style="color:black;background:white">" </span><span style="color:red;background:white">type</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">varchar</span><span style="color:black;background:white">" </span><span style="color:red;background:white">len</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">100</span><span style="color:black;background:white">"  </span><span style="color:red;background:white">displaytype</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">text</span><span style="color:black;background:white">" </span><span style="color:red;background:white">dropdownoptions</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"" </span><span style="color:red;background:white">default</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">""</span><span style="color:blue;background:white">/&gt;
                &lt;</span><span style="color:#a31515;background:white">Domain </span><span style="color:red;background:white">name</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">对应金额</span><span style="color:black;background:white">" </span><span style="color:red;background:white">isupdate</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">0</span><span style="color:black;background:white">" </span><span style="color:red;background:white">isnull</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">0</span><span style="color:black;background:white">" </span><span style="color:red;background:white">type</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">money</span><span style="color:black;background:white">" </span><span style="color:red;background:white">len</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">8</span><span style="color:black;background:white">"  </span><span style="color:red;background:white">displaytype</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"</span><span style="color:blue;background:white">number</span><span style="color:black;background:white">" </span><span style="color:red;background:white">dropdownoptions</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">"" </span><span style="color:red;background:white">default</span><span style="color:blue;background:white">=</span><span style="color:black;background:white">""</span><span style="color:blue;background:white">/&gt;
            &lt;/</span><span style="color:#a31515;background:white">Item</span><span style="color:blue;background:white">&gt;
        &lt;/</span><span style="color:#a31515;background:white">Group</span><span style="color:blue;background:white">&gt;
    &lt;/</span><span style="color:#a31515;background:white">Item</span><span style="color:blue;background:white">&gt;
&lt;/</span><span style="color:#a31515;background:white">BusinessType</span><span style="color:blue;background:white">&gt;
</span>
</pre>

<p class="title">批量设置Domain节点</p>
<p>为了给所有的Domain节点（Group中的Doamin除外）赋值，我们可以使用下面的方法：
</p>

<pre class="code">
<span style="color:green;background:white">// 1. 创建一个BusinessTypeManager实例
</span><span style="color:#2b91af;background:white">BusinessTypeManager </span><span style="color:black;background:white">manager </span><span style="color:red;background:white">= </span><span style="color:#2b91af;background:white">BusinessTypeManager</span><span style="color:red;background:white">.</span><span style="color:black;background:white">FromFile(</span><span style="color:#a31515;background:white">"/PubProject/......./CbContractBalanceSP_HTML.xml"</span><span style="color:black;background:white">);

</span><span style="color:green;background:white">// 2. 获取数据
</span><span style="color:#2b91af;background:white">DataTable </span><span style="color:black;background:white">table </span><span style="color:red;background:white">= </span><span style="color:#2b91af;background:white">CPQuery</span><span style="color:red;background:white">.</span><span style="color:black;background:white">From(</span><span style="color:#a31515;background:white">@"SELECT BUGUID as [公司GUID], ProjGUID as [项目GUID], .......
                                FROM ... WHERE ..... "</span><span style="color:black;background:white">)</span><span style="color:red;background:white">.</span><span style="color:black;background:white">FillDataTable();

</span><span style="color:green;background:white">// 3. 将查询结果绑定到所有Domain节点的 innerText 属性
// 对于每个Doamin节点，BusinessTypeManager会根据name属性值做为列名从table中获取数据，然后未完成赋值操作。
</span><span style="color:black;background:white">manager</span><span style="color:red;background:white">.</span><span style="color:black;background:white">Bind(table);</span>

</pre>




<p class="title">批量设置Group节点</p>

<pre class="code">
<span style="color:green;background:white">// 继续使用前面的 manager 实例

// 1. 为第一个Group获取数据
</span><span style="color:#2b91af;background:white">DataTable </span><span style="color:black;background:white">table1 </span><span style="color:red;background:white">= </span><span style="color:#2b91af;background:white">CPQuery</span><span style="color:red;background:white">.</span><span style="color:black;background:white">From(</span><span style="color:#a31515;background:white">@"SELECT BudgetName AS [合约规划名称], CostShortName AS [科目名称], .... 
                            FROM .... WHERE ..........."</span><span style="color:black;background:white">)</span><span style="color:red;background:white">.</span><span style="color:black;background:white">FillDataTable();
</span><span style="color:green;background:white">// 2. 为第一个Group绑定数据
</span><span style="color:black;background:white">manager</span><span style="color:red;background:white">.</span><span style="color:black;background:white">BindGroup(</span><span style="color:#a31515;background:white">"合约规划使用明细列表"</span><span style="color:black;background:white">, table1);


</span><span style="color:green;background:white">// 3. 为第二个Group获取数据
</span><span style="color:#2b91af;background:white">DataTable </span><span style="color:black;background:white">table2 </span><span style="color:red;background:white">= </span><span style="color:#2b91af;background:white">CPQuery</span><span style="color:red;background:white">.</span><span style="color:black;background:white">From(</span><span style="color:#a31515;background:white">@"SELECT ZrrName AS [责任人], DeptName AS [责任部门], .... 
                            FROM .... WHERE ..........."</span><span style="color:black;background:white">)</span><span style="color:red;background:white">.</span><span style="color:black;background:white">FillDataTable();
</span><span style="color:green;background:white">// 4. 为第二个Group绑定数据
</span><span style="color:black;background:white">manager</span><span style="color:red;background:white">.</span><span style="color:black;background:white">BindGroup(</span><span style="color:#a31515;background:white">"部门费用列表"</span><span style="color:black;background:white">, table2);</span>
</pre>




<p class="title">高级用法</p>

<p>前面演示了二种简单的使用场景，对于工作流XML来说，还有【比较域】，【序号列】之类的复杂设计，
对于这些复杂情况，可以通过<span style="color:#2b91af">BindOption</span>类来指定绑定选项
</p>

<pre class="code">
<span style="color:green">//从文件加载BusinessType类实例
</span><span style="color:#2b91af">BusinessTypeManager </span>btm <span style="color:red">= </span><span style="color:#2b91af">BusinessTypeManager</span><span style="color:red">.</span>FromFile(<span style="color:#a31515">"/PubProject/......./CbContractBalanceSP_HTML.xml"</span>);

<span style="color:green">//查询SQL
</span><span style="color:blue">string </span>sql <span style="color:red">= </span><span style="color:#a31515">@"SELECT
                BudgetName,
                CostName,
                BudgetAmount,
                CfAmount
               FROM ..."</span>;

<span style="color:green">//映射关系 { ColumnName, DomainName }
</span><span style="color:#2b91af">Dictionary</span><span style="color:red">&lt;</span><span style="color:blue">string</span>, <span style="color:blue">string</span><span style="color:red">&gt; </span>dict <span style="color:red">= </span><span style="color:blue">new </span><span style="color:#2b91af">Dictionary</span><span style="color:red">&lt;</span><span style="color:blue">string</span>, <span style="color:blue">string</span><span style="color:red">&gt;</span>() { 
    { <span style="color:#a31515">"BudgetName"</span>, <span style="color:#a31515">"合约规划名称" </span>},
    { <span style="color:#a31515">"CostName"</span>, <span style="color:#a31515">"科目名称" </span>},
    { <span style="color:#a31515">"BudgetAmount"</span>, <span style="color:#a31515">"合约规划金额" </span>},
    { <span style="color:#a31515">"CfAmount"</span>, <span style="color:#a31515">"合同对应金额" </span>}
};

<span style="color:green">//HashColumns仅在BindGroup中有效
//需要计算哈希值的字段,使用映射后的名称
//[合约规划金额][合同对应金额]这两个字段的值将被逐行拼接,并且对拼接后的字符串做GetHashCode()操作
//最后将得到的哈希值写入[合约规划使用明细列表比较域]中
</span><span style="color:#2b91af">List</span><span style="color:red">&lt;</span><span style="color:blue">string</span><span style="color:red">&gt; </span>hash <span style="color:red">= </span><span style="color:blue">new </span><span style="color:#2b91af">List</span><span style="color:red">&lt;</span><span style="color:blue">string</span><span style="color:red">&gt;</span>() { <span style="color:#a31515">"合约规划金额"</span>, <span style="color:#a31515">"合同对应金额" </span>};

<span style="color:green">//数据表
</span><span style="color:#2b91af">DataTable </span>dt <span style="color:red">= </span><span style="color:#2b91af">CPQuery</span><span style="color:red">.</span>From(sql)<span style="color:red">.</span>FillDataTable();

<span style="color:green">//声明绑定对象
</span><span style="color:#2b91af">BindOption </span>bo <span style="color:red">= </span><span style="color:blue">new </span><span style="color:#2b91af">BindOption</span>();
bo<span style="color:red">.</span>ColumnMap <span style="color:red">= </span>dict;
bo<span style="color:red">.</span>HashColumns <span style="color:red">= </span>hash;
<span style="color:green">//IdentityDomain仅在BindGroup中有效
</span>bo<span style="color:red">.</span>IdentityDomain <span style="color:red">= </span><span style="color:#a31515">"序号"</span>;  <span style="color:green">//循环域中的[序号]域将被填充为1,2,3,4....序列

//绑定循环域
</span>btm<span style="color:red">.</span>BindGroup(<span style="color:#a31515">"合约规划使用明细"</span>, dt, bo);

</pre>
























</div>
</div>
</body>

</html>
